openapi: '3.0.0'
info:
  title: 'WebProgramming2025 API'
  version: '1.0.0'
  description: 'Personal Finance Management API - Complete documentation for managing users, categories, expenses, income, savings, and profiles'
servers:
  -
    url: 'http://localhost:8001'
    description: 'Local Development Server'
tags:
  -
    name: 'Users'
    description: 'User management endpoints'
  -
    name: 'Auth'
    description: 'Authentication endpoints'
  -
    name: 'Categories'
    description: 'Category management endpoints'
  -
    name: 'Expenses'
    description: 'Expense tracking endpoints'
  -
    name: 'Income'
    description: 'Income tracking endpoints'
  -
    name: 'Savings'
    description: 'Savings management endpoints'
  -
    name: 'Profiles'
    description: 'User profile management endpoints'
paths:
  /users:
    get:
      tags:
        - 'Users'
      summary: 'Get all users'
      responses:
        200:
          description: 'List of users'
          content:
            application/json:
              schema:
                type: 'array'
                items:
                  $ref: '#/components/schemas/User'
    post:
      tags:
        - 'Users'
      summary: 'Create a new user'
      requestBody:
        required: 'true'
        content:
          application/json:
            schema:
              type: 'object'
              required:
                - 'name'
                - 'email'
                - 'password'
              properties:
                name:
                  type: 'string'
                  example: 'John Doe'
                email:
                  type: 'string'
                  format: 'email'
                  example: 'john@example.com'
                password:
                  type: 'string'
                  format: 'password'
                  example: 'securePassword123'
      responses:
        200:
          description: 'User created successfully'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Success'
  /users/{id}:
    get:
      tags:
        - 'Users'
      summary: 'Get user by ID'
      parameters:
        -
          name: 'id'
          in: 'path'
          required: 'true'
          schema:
            type: 'integer'
      responses:
        200:
          description: 'User details'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
    put:
      tags:
        - 'Users'
      summary: 'Update user by ID'
      parameters:
        -
          name: 'id'
          in: 'path'
          required: 'true'
          schema:
            type: 'integer'
      requestBody:
        content:
          application/json:
            schema:
              type: 'object'
              properties:
                name:
                  type: 'string'
                email:
                  type: 'string'
                  format: 'email'
      responses:
        200:
          description: 'User updated successfully'
    delete:
      tags:
        - 'Users'
      summary: 'Delete user by ID'
      parameters:
        -
          name: 'id'
          in: 'path'
          required: 'true'
          schema:
            type: 'integer'
      responses:
        200:
          description: 'User deleted successfully'
  /users/login:
    post:
      tags:
        - 'Auth'
      summary: 'User login'
      requestBody:
        required: 'true'
        content:
          application/json:
            schema:
              type: 'object'
              required:
                - 'email'
                - 'password'
              properties:
                email:
                  type: 'string'
                  format: 'email'
                password:
                  type: 'string'
                  format: 'password'
      responses:
        200:
          description: 'Successful login'
          content:
            application/json:
              schema:
                type: 'object'
                properties:
                  user_id:
                    type: 'integer'
        401:
          description: 'Invalid credentials'
  /categories:
    get:
      tags:
        - 'Categories'
      summary: 'Get all categories'
      responses:
        200:
          description: 'List of categories'
          content:
            application/json:
              schema:
                type: 'array'
                items:
                  $ref: '#/components/schemas/Category'
    post:
      tags:
        - 'Categories'
      summary: 'Create a new category'
      requestBody:
        required: 'true'
        content:
          application/json:
            schema:
              type: 'object'
              properties:
                name:
                  type: 'string'
                description:
                  type: 'string'
      responses:
        200:
          description: 'Category created successfully'
  /categories/{id}:
    get:
      tags:
        - 'Categories'
      summary: 'Get category by ID'
      parameters:
        -
          name: 'id'
          in: 'path'
          required: 'true'
          schema:
            type: 'integer'
      responses:
        200:
          description: 'Category details'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Category'
    put:
      tags:
        - 'Categories'
      summary: 'Update category by ID'
      parameters:
        -
          name: 'id'
          in: 'path'
          required: 'true'
          schema:
            type: 'integer'
      requestBody:
        content:
          application/json:
            schema:
              type: 'object'
              properties:
                name:
                  type: 'string'
                description:
                  type: 'string'
      responses:
        200:
          description: 'Category updated successfully'
    delete:
      tags:
        - 'Categories'
      summary: 'Delete category by ID'
      parameters:
        -
          name: 'id'
          in: 'path'
          required: 'true'
          schema:
            type: 'integer'
      responses:
        200:
          description: 'Category deleted successfully'
  /expenses:
    get:
      tags:
        - 'Expenses'
      summary: 'Get expenses for a specific user'
      parameters:
        -
          name: 'user_id'
          in: 'query'
          required: 'true'
          schema:
            type: 'integer'
          description: 'User ID'
      responses:
        200:
          description: 'List of expenses'
          content:
            application/json:
              schema:
                type: 'array'
                items:
                  $ref: '#/components/schemas/Expense'
        400:
          description: 'Missing user_id parameter'
    post:
      tags:
        - 'Expenses'
      summary: 'Create a new expense'
      requestBody:
        required: 'true'
        content:
          application/json:
            schema:
              type: 'object'
              required:
                - 'user_id'
                - 'amount'
                - 'category'
                - 'date'
              properties:
                user_id:
                  type: 'integer'
                amount:
                  type: 'number'
                  format: 'float'
                category:
                  type: 'string'
                date:
                  type: 'string'
                  format: 'date'
                description:
                  type: 'string'
                  nullable: 'true'
      responses:
        200:
          description: 'Expense created successfully'
  /expenses/{id}:
    get:
      tags:
        - 'Expenses'
      summary: 'Get expense by ID'
      parameters:
        -
          name: 'id'
          in: 'path'
          required: 'true'
          schema:
            type: 'integer'
      responses:
        200:
          description: 'Expense details'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Expense'
    put:
      tags:
        - 'Expenses'
      summary: 'Update an expense'
      parameters:
        -
          name: 'id'
          in: 'path'
          required: 'true'
          schema:
            type: 'integer'
      requestBody:
        content:
          application/json:
            schema:
              type: 'object'
              properties:
                amount:
                  type: 'number'
                  format: 'float'
                category:
                  type: 'string'
                date:
                  type: 'string'
                  format: 'date'
                description:
                  type: 'string'
      responses:
        200:
          description: 'Expense updated successfully'
    delete:
      tags:
        - 'Expenses'
      summary: 'Delete an expense'
      parameters:
        -
          name: 'id'
          in: 'path'
          required: 'true'
          schema:
            type: 'integer'
      responses:
        200:
          description: 'Expense deleted successfully'
  /income:
    get:
      tags:
        - 'Income'
      summary: 'Get income records for a specific user'
      parameters:
        -
          name: 'user_id'
          in: 'query'
          required: 'true'
          schema:
            type: 'integer'
      responses:
        200:
          description: 'List of income records'
          content:
            application/json:
              schema:
                type: 'array'
                items:
                  $ref: '#/components/schemas/Income'
        400:
          description: 'user_id parameter is missing'
    post:
      tags:
        - 'Income'
      summary: 'Create new income record'
      requestBody:
        required: 'true'
        content:
          application/json:
            schema:
              type: 'object'
              required:
                - 'user_id'
                - 'amount'
                - 'date_received'
              properties:
                user_id:
                  type: 'integer'
                amount:
                  type: 'number'
                  format: 'float'
                source:
                  type: 'string'
                  nullable: 'true'
                date_received:
                  type: 'string'
                  format: 'date'
      responses:
        200:
          description: 'Income created successfully'
        400:
          description: 'Error in input'
  /income/{id}:
    get:
      tags:
        - 'Income'
      summary: 'Get income record by ID'
      parameters:
        -
          name: 'id'
          in: 'path'
          required: 'true'
          schema:
            type: 'integer'
      responses:
        200:
          description: 'Income record details'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Income'
    put:
      tags:
        - 'Income'
      summary: 'Update income record'
      parameters:
        -
          name: 'id'
          in: 'path'
          required: 'true'
          schema:
            type: 'integer'
      requestBody:
        content:
          application/json:
            schema:
              type: 'object'
              properties:
                amount:
                  type: 'number'
                  format: 'float'
                source:
                  type: 'string'
                date_received:
                  type: 'string'
                  format: 'date'
      responses:
        200:
          description: 'Income record updated'
    delete:
      tags:
        - 'Income'
      summary: 'Delete income record'
      parameters:
        -
          name: 'id'
          in: 'path'
          required: 'true'
          schema:
            type: 'integer'
      responses:
        200:
          description: 'Income record deleted'
  /savings:
    get:
      tags:
        - 'Savings'
      summary: 'Get all savings records'
      responses:
        200:
          description: 'List of savings records'
          content:
            application/json:
              schema:
                type: 'array'
                items:
                  $ref: '#/components/schemas/Savings'
    post:
      tags:
        - 'Savings'
      summary: 'Create savings data for a user'
      requestBody:
        required: 'true'
        content:
          application/json:
            schema:
              type: 'object'
              required:
                - 'user_id'
                - 'monthly_savings'
                - 'yearly_savings'
              properties:
                user_id:
                  type: 'integer'
                monthly_savings:
                  type: 'number'
                  format: 'float'
                yearly_savings:
                  type: 'number'
                  format: 'float'
                date_recorded:
                  type: 'string'
                  format: 'date'
                  nullable: 'true'
      responses:
        200:
          description: 'Savings created successfully'
  /savings/{user_id}:
    get:
      tags:
        - 'Savings'
      summary: 'Get savings record by user ID'
      parameters:
        -
          name: 'user_id'
          in: 'path'
          required: 'true'
          schema:
            type: 'integer'
      responses:
        200:
          description: 'Savings record'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Savings'
    put:
      tags:
        - 'Savings'
      summary: 'Update savings data for a user'
      parameters:
        -
          name: 'user_id'
          in: 'path'
          required: 'true'
          schema:
            type: 'integer'
      requestBody:
        required: 'true'
        content:
          application/json:
            schema:
              type: 'object'
              properties:
                monthly_savings:
                  type: 'number'
                  format: 'float'
                yearly_savings:
                  type: 'number'
                  format: 'float'
                date_recorded:
                  type: 'string'
                  format: 'date'
      responses:
        200:
          description: 'Savings updated successfully'
    delete:
      tags:
        - 'Savings'
      summary: 'Delete savings data for a user'
      parameters:
        -
          name: 'user_id'
          in: 'path'
          required: 'true'
          schema:
            type: 'integer'
      responses:
        200:
          description: 'Savings deleted successfully'
  /profiles:
    get:
      tags:
        - 'Profiles'
      summary: 'Get all profiles'
      responses:
        200:
          description: 'List of profiles'
          content:
            application/json:
              schema:
                type: 'array'
                items:
                  $ref: '#/components/schemas/Profile'
    post:
      tags:
        - 'Profiles'
      summary: 'Create new profile'
      requestBody:
        required: 'true'
        content:
          application/json:
            schema:
              type: 'object'
              properties:
                user_id:
                  type: 'integer'
                first_name:
                  type: 'string'
                last_name:
                  type: 'string'
                age:
                  type: 'integer'
                  nullable: 'true'
                bio:
                  type: 'string'
                  nullable: 'true'
                avatar_url:
                  type: 'string'
                  nullable: 'true'
      responses:
        200:
          description: 'Profile created successfully'
  /profiles/{id}:
    get:
      tags:
        - 'Profiles'
      summary: 'Get profile by ID'
      parameters:
        -
          name: 'id'
          in: 'path'
          required: 'true'
          schema:
            type: 'integer'
      responses:
        200:
          description: 'Profile details'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Profile'
    put:
      tags:
        - 'Profiles'
      summary: 'Update profile'
      parameters:
        -
          name: 'id'
          in: 'path'
          required: 'true'
          schema:
            type: 'integer'
      requestBody:
        content:
          application/json:
            schema:
              type: 'object'
              properties:
                first_name:
                  type: 'string'
                last_name:
                  type: 'string'
                age:
                  type: 'integer'
                bio:
                  type: 'string'
                avatar_url:
                  type: 'string'
      responses:
        200:
          description: 'Profile updated successfully'
    delete:
      tags:
        - 'Profiles'
      summary: 'Delete profile'
      parameters:
        -
          name: 'id'
          in: 'path'
          required: 'true'
          schema:
            type: 'integer'
      responses:
        200:
          description: 'Profile deleted successfully'
components:
  schemas:
    User:
      type: 'object'
      properties:
        user_id:
          type: 'integer'
          example: 1
        name:
          type: 'string'
          example: 'John Doe'
        email:
          type: 'string'
          format: 'email'
          example: 'john@example.com'
        created_at:
          type: 'string'
          format: 'date-time'
    Category:
      type: 'object'
      properties:
        category_id:
          type: 'integer'
          example: 1
        name:
          type: 'string'
          example: 'Food'
        description:
          type: 'string'
          example: 'Food and groceries'
    Expense:
      type: 'object'
      properties:
        expense_id:
          type: 'integer'
          example: 1
        user_id:
          type: 'integer'
          example: 1
        amount:
          type: 'number'
          format: 'float'
          example: 50
        category:
          type: 'string'
          example: 'Food'
        date:
          type: 'string'
          format: 'date'
          example: '2025-01-15'
        description:
          type: 'string'
          example: 'Grocery shopping'
    Income:
      type: 'object'
      properties:
        income_id:
          type: 'integer'
          example: 1
        user_id:
          type: 'integer'
          example: 1
        amount:
          type: 'number'
          format: 'float'
          example: 2000
        source:
          type: 'string'
          example: 'Salary'
        date_received:
          type: 'string'
          format: 'date'
          example: '2025-01-01'
    Savings:
      type: 'object'
      properties:
        savings_id:
          type: 'integer'
          example: 1
        user_id:
          type: 'integer'
          example: 1
        monthly_savings:
          type: 'number'
          format: 'float'
          example: 500
        yearly_savings:
          type: 'number'
          format: 'float'
          example: 6000
        date_recorded:
          type: 'string'
          format: 'date'
          example: '2025-01-01'
    Profile:
      type: 'object'
      properties:
        profile_id:
          type: 'integer'
          example: 1
        user_id:
          type: 'integer'
          example: 1
        first_name:
          type: 'string'
          example: 'John'
        last_name:
          type: 'string'
          example: 'Doe'
        age:
          type: 'integer'
          example: 30
        bio:
          type: 'string'
          example: 'Software developer'
        avatar_url:
          type: 'string'
          example: 'https://example.com/avatar.jpg'
    Error:
      type: 'object'
      properties:
        error:
          type: 'string'
          example: 'Error message'
    Success:
      type: 'object'
      properties:
        success:
          type: 'boolean'
          example: 'true'
